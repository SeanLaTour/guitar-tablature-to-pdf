(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(e=n.currentScript.src),!e)){var i=n.getElementsByTagName("script");if(i.length)for(var o=i.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=i[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();const e=t.p+"7a47064df6fad473253a.svg";var n=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))};const i="eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNzBjYWM3ZjY2YWRkYWE3ZTFiNjY1ZjI5YzRkNzliZjQyZjk5NzhiZDZlYTBmMmFmN2Y5ZmRhZDc1ZDNiZTk2YWJkNjI0MjhjZDc3ZTkzNTIiLCJpYXQiOjE3NDA1NjY0MDQuODE3MjY5LCJuYmYiOjE3NDA1NjY0MDQuODE3MjcxLCJleHAiOjQ4OTYyNDAwMDQuODExNjM5LCJzdWIiOiI3MTE3MTY1MyIsInNjb3BlcyI6WyJ1c2VyLnJlYWQiLCJ1c2VyLndyaXRlIiwidGFzay5yZWFkIiwidGFzay53cml0ZSIsIndlYmhvb2sucmVhZCIsIndlYmhvb2sud3JpdGUiLCJwcmVzZXQucmVhZCIsInByZXNldC53cml0ZSJdfQ.B8py_YqzZMacZP2WnSQHJm_Gh97EvSz1j1g4nvGOsGd9DvxqUha3ZOuiSZsOD-0bItKPBFJP7PLILZd1K5YCJwvSV1e5XkmaUM4_QYo870xi8DfmNR6bN5zf5nquwj7aVORirv6_q1pzjV5tg3j0RXSMV-GSsBA4wCE3oLEOg6GtcEVdV5soLv5jwbWhauDSuFoXiZI61bQut2TsAngVUlN0wyLr3ufH68izMwRRlPJdpHh_D7KfjTdMN5Gxb9QKUGjJ0ekdw5e5JZKACSGZNJAdcHeEElcTHnFLnjn0I-4edwQaBbu1qwvEF8ZvFN0ZrPvBEUtkd5bzyuT60NOzensyfnHyYaiZd1FaiGN_bLIsW_vCfUfDWOiOAEeRHb_mpwj64y2sLT1HGFqi6rWFS3b4uNxD22TF7DM62PiS6AzCljhG4n8fScdncLmT6DuqQ7PPcj4HfE5ixd8QuuES7ZwP05RDmTeNgN-lYZ-Kkb-5l06ElwOc9K7-ORSU_iPp0pCJtf5KrtVcdqd4HZ3zgCZ7EBczKbTMusP4eCKo0r-TmoZCx0grJ83MBoPkgtRrQwzyyaLl-qq4_eSvmelYLsYS6BwLIE_YF-ljXf90JkuQIFZpCpHKICebrbGiCVrr93WTqvUz4hmrqEuilbwh-etxjF_Nd-Kq5hJ9RjZSz5s";class o{constructor(){this.TIMER=5,this.openWelcomePopupModal=t=>{const e=document.getElementById("tutorial-modal"),n=document.getElementById("tutorial-modal-overlay");e.innerHTML=t,e.style.display="flex",n.style.display="flex",document.getElementById("welcome-confirm-button").addEventListener("click",(()=>{const t=document.getElementById("upload-file-button"),e=document.getElementById("tutorial-modal"),n=document.getElementById("tutorial-modal-overlay");e.style.display="none",n.style.display="none",setTimeout((()=>{t.classList.add("tab-cell-active-tutorial")}),500)}))},this.openSelectFirstClipPopupModal=t=>{const e=document.getElementById("tutorial-modal"),n=document.getElementById("tutorial-modal-overlay"),i=document.getElementById("view-tab-chunks-button");e.innerHTML=t,e.style.display="flex",n.style.display="flex",i.classList.remove("tab-cell-active-tutorial"),document.getElementById("welcome-confirm-button").addEventListener("click",(()=>{const t=document.getElementsByClassName("tab-chunk-text"),e=document.getElementById("tutorial-modal"),n=document.getElementById("tutorial-modal-overlay");e.style.display="none",n.style.display="none",setTimeout((()=>{t[0].classList.add("tab-cell-active-tutorial")}),500)}))},this.openSelectClipPopupModal=t=>{const e=document.getElementById("tutorial-modal"),n=document.getElementById("tutorial-modal-overlay");e.innerHTML=t,e.style.display="flex",n.style.display="flex",document.getElementById("welcome-confirm-button").addEventListener("click",(()=>{const t=document.getElementById("view-tab-chunks-button"),e=document.getElementById("tutorial-modal"),n=document.getElementById("tutorial-modal-overlay");e.style.display="none",n.style.display="none",setTimeout((()=>{t.classList.add("tab-cell-active-tutorial")}),500)}))},this.openSetStartPointPopupModal=t=>{const e=document.getElementById("tutorial-modal"),n=document.getElementById("tutorial-modal-overlay"),i=document.getElementsByClassName("tab-chunk-text");e.innerHTML=t,e.style.display="flex",n.style.display="flex",i[0].classList.remove("tab-cell-active-tutorial"),document.getElementById("welcome-confirm-button").addEventListener("click",(()=>{const t=document.getElementById("start-tab-segment-button"),e=document.getElementById("tutorial-modal"),n=document.getElementById("tutorial-modal-overlay");e.style.display="none",n.style.display="none",setTimeout((()=>{t.classList.add("tab-cell-active-tutorial")}),500)}))},this.initWelcomeTutorialFlow=()=>{const t=document.createElement("label"),e=document.createElement("button");e.id="welcome-confirm-button",e.innerHTML="Let's upload it!",t.innerHTML="Let's upload the video we would like to add our tabs to.",setTimeout((()=>{this.openWelcomePopupModal(t.outerHTML+e.outerHTML)}),1500)},this.initSelectClipTutorialFlow=()=>{const t=document.createElement("label"),e=document.createElement("button");e.id="welcome-confirm-button",e.innerHTML="Got it!",t.innerHTML="Now that our video is uploaded, we'll have to select the first clip and place it so that it matches up with our fingers.",setTimeout((()=>{this.openSelectClipPopupModal(t.outerHTML+e.outerHTML)}),1e3)},this.initSelectFirstClipTutorialFlow=()=>{const t=document.createElement("label"),e=document.createElement("button");e.id="welcome-confirm-button",e.innerHTML="Got it!",t.innerHTML="Now select the clip that you'd like to edit. How about this first one?",setTimeout((()=>{this.openSelectFirstClipPopupModal(t.outerHTML+e.outerHTML)}),1e3)},this.initSetStartPointFlow=()=>{const t=document.createElement("label"),e=document.createElement("button");e.id="welcome-confirm-button",e.innerHTML="Got it!",t.innerHTML="Now let's set the starting point for this segment of your tab. The starting point will be set wherever the dot on the scroll bar is when the start button is clicked. <i class'fa fa-arrow-right-from-bracket'></i>",setTimeout((()=>{this.openSetStartPointPopupModal(t.outerHTML+e.outerHTML)}),1e3)},this.initTutorial=()=>{this.initWelcomeTutorialFlow()},this.init=()=>{"Safari Mobile"===this.detectBrowser()||"Firefox"===this.detectBrowser()?document.querySelector("body").innerHTML="<h1 style='text-align: center; color: white;'> We're sorry, TickTabs.com is not currently set up to work on your browser.</h1>":(this.getUserAccount(),this.addTabSegmentListeners(),this.addBackButtonListener())},this.addClosePopupListener=()=>{document.getElementById("close-tab-chunk-container-icon").addEventListener("click",(()=>{document.getElementById("popup-modal").style.display="none"}))},this.addMarkers=()=>{const t=o.videoDuration,e=document.querySelector(".markers"),n=this.getVideoTime(o.tabChunks.highEString),i=[],r=[];n.forEach((t=>{i.push(t.start),r.push(t.end)})),e.innerHTML="",i.forEach(((n,i)=>{const o=document.createElement("div");o.classList.add("marker");const a=n/t*100,s=r[i]/t*100;o.style.left=`${a}%`,o.style.width=s-a+"%",o.style.backgroundColor=`${this.tabClipSegmentColors[i]}`,o.style.opacity=".5",e.appendChild(o)}))},this.getVideoText=t=>{const e=[];return t.forEach((t=>{e.push(t.text)})),e},this.getVideoTime=t=>{const e=[];return t.forEach((t=>{e.push(t.time)})),e},this.buildTabChunkHTML=()=>{const t=document.createElement("div");t.classList.add("tab-chunk-container");for(let e=0;e<Object.keys(o.tabChunks.highEString).length;e++){const n=document.createElement("div");n.id="tab-chunk-"+o.tabChunks.highEString[e].id,n.classList.add("tab-chunk-text");const i=document.createElement("p");i.innerHTML=o.tabChunks.highEString[e].text,n.append(i);const r=document.createElement("p");r.innerHTML=o.tabChunks.bString[e].text,n.append(r);const a=document.createElement("p");a.innerHTML=o.tabChunks.gString[e].text,n.append(a);const s=document.createElement("p");s.innerHTML=o.tabChunks.dString[e].text,n.append(s);const l=document.createElement("p");l.innerHTML=o.tabChunks.aString[e].text,n.append(l);const d=document.createElement("p");d.innerHTML=o.tabChunks.eString[e].text,n.append(d),n.style.backgroundColor=this.tabClipSegmentColors[e],n.setAttribute("color",this.tabClipSegmentColors[e]),t.append(n)}const e=document.createElement("i");return e.classList.add("fas"),e.classList.add("fa-angle-down"),e.id="close-tab-chunk-container-icon",t.prepend(e),t.outerHTML},this.adjustTabChunkTime=t=>{const e=t.id.split("-")[2];o.selectedTabChunkId=e},this.addBackButtonListener=()=>{const t=document.getElementById("return-to-tab-button");t&&t.addEventListener("click",(()=>{window.location.href="create.html?username="+this.user.username+"&title="+this.tabTitle}))},this.addTabSegmentListeners=()=>{const t=document.getElementById("start-tab-segment-button"),e=document.getElementById("end-tab-segment-button"),n=document.getElementById("video-timeline");t&&e&&(t.addEventListener("click",(()=>{t.style.backgroundColor="#23FE69",setTimeout((()=>{t.style.backgroundColor="rgb(29, 29, 31, .75)"}),1e3);for(let t=0;t<Object.keys(o.tabChunks.highEString).length;t++)o.tabChunks.highEString[t].id===Number(o.selectedTabChunkId)&&(o.tabChunks.highEString[t].time.start=Math.round(Number(n.value)*o.videoDuration/100)),o.tabChunks.bString[t].id===Number(o.selectedTabChunkId)&&(o.tabChunks.bString[t].time.start=Math.round(Number(n.value)*o.videoDuration/100)),o.tabChunks.gString[t].id===Number(o.selectedTabChunkId)&&(o.tabChunks.gString[t].time.start=Math.round(Number(n.value)*o.videoDuration/100)),o.tabChunks.dString[t].id===Number(o.selectedTabChunkId)&&(o.tabChunks.dString[t].time.start=Math.round(Number(n.value)*o.videoDuration/100)),o.tabChunks.aString[t].id===Number(o.selectedTabChunkId)&&(o.tabChunks.aString[t].time.start=Math.round(Number(n.value)*o.videoDuration/100)),o.tabChunks.eString[t].id===Number(o.selectedTabChunkId)&&(o.tabChunks.eString[t].time.start=Math.round(Number(n.value)*o.videoDuration/100));this.addMarkers(),this.initVideoUpload()})),e.addEventListener("click",(()=>{e.style.backgroundColor="#23FE69",setTimeout((()=>{e.style.backgroundColor="rgb(29, 29, 31, .75)"}),1e3);for(let t=0;t<Object.keys(o.tabChunks.highEString).length;t++)o.tabChunks.highEString[t].id===Number(o.selectedTabChunkId)&&(o.tabChunks.highEString[t].time.end=Math.round(Number(n.value)*o.videoDuration/100)),o.tabChunks.bString[t].id===Number(o.selectedTabChunkId)&&(o.tabChunks.bString[t].time.end=Math.round(Number(n.value)*o.videoDuration/100)),o.tabChunks.gString[t].id===Number(o.selectedTabChunkId)&&(o.tabChunks.gString[t].time.end=Math.round(Number(n.value)*o.videoDuration/100)),o.tabChunks.dString[t].id===Number(o.selectedTabChunkId)&&(o.tabChunks.dString[t].time.end=Math.round(Number(n.value)*o.videoDuration/100)),o.tabChunks.aString[t].id===Number(o.selectedTabChunkId)&&(o.tabChunks.aString[t].time.end=Math.round(Number(n.value)*o.videoDuration/100)),o.tabChunks.eString[t].id===Number(o.selectedTabChunkId)&&(o.tabChunks.eString[t].time.end=Math.round(Number(n.value)*o.videoDuration/100));this.addMarkers(),this.initVideoUpload()})))},this.saveVideo=(t,e)=>n(this,void 0,void 0,(function*(){const o=document.getElementById("start-record"),r=document.createElement("video"),a=document.getElementById("video-canvas"),s=a.getContext("2d"),l=document.getElementById("loading-modal"),d=document.getElementById("loading-message");let g=["","","","","",""];r.style.display="none",r.src=URL.createObjectURL(t);let u,c=[],h=!1;function m(){if(h){if(s.clearRect(0,0,a.width,a.height),s.drawImage(r,0,0,a.width,a.height),s.font="48px Monospace",s.fillStyle="white",s.strokeStyle="white",s.lineWidth=2,s.textAlign="left",g.forEach(((t,e)=>{if(t){const n=50,i=a.height-50*(6-e)-100;s.fillText(t,n,i),s.strokeText(t,n,i)}})),r.currentTime>=r.duration)return u.stop(),void(h=!1);requestAnimationFrame(m)}}o.addEventListener("click",(function(){if(h)return;l.style.display="flex",function(){const t=document.getElementById("video-timeline");t&&(t.value="0",t.dispatchEvent(new Event("input")))}(),c=[];const t=a.captureStream(30),o=r.captureStream(),s=new MediaStream;t.getTracks().forEach((t=>s.addTrack(t))),o.getTracks().forEach((t=>s.addTrack(t))),u=new MediaRecorder(s,{mimeType:"video/webm"}),u.ondataavailable=t=>{t.data&&t.data.size>0&&c.push(t.data)},u.onstop=()=>n(this,void 0,void 0,(function*(){const t=new Blob(c,{type:"video/webm"});yield function(t,e){return n(this,void 0,void 0,(function*(){var n,o,r,a,s;try{d.innerHTML="Starting upload and conversion process...";const g=yield fetch("https://api.cloudconvert.com/v2/jobs",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({tasks:{upload:{operation:"import/upload"},convert:{operation:"convert",input:["upload"],output_format:"mp4",options:{video_codec:"h264",audio_codec:"aac"}},export:{operation:"export/url",input:["convert"]}}})});g.ok||(d.innerHTML=`ERROR: Job Creation Error: ${g.statusText}`);const u=yield g.json();d.innerHTML="MP4 Conversion in progress...";const c=u.data.tasks.find((t=>"import/upload"===t.operation));c&&(null===(o=null===(n=c.result)||void 0===n?void 0:n.form)||void 0===o?void 0:o.url)||(d.innerHTML="ERROR: Upload URL not found in CloudConvert response."),d.innerHTML="No issue with uploadTask.";const h=c.result.form.url,m=c.result.form.parameters||{},p=new FormData;for(const[t,e]of Object.entries(m))p.append(t,e),d.innerHTML=`Value appending to form data: ${e}`;p.append("file",t,e+".webm"),d.innerHTML="Form data appended! Waiting for uploadFileResponse.";const S=new AbortController;d.innerHTML="Controler created.";const b=setTimeout((()=>S.abort()),6e4);let y;d.innerHTML="timeout begins...",d.innerHTML="ERROR: Stalled before uploadVideo.";try{d.innerHTML="Uploading video...",y=yield fetch(h,{method:"POST",body:p,signal:S.signal}),d.innerHTML=`uploadFileResponse: ${y.text()}`,clearTimeout(b)}catch(t){d.innerHTML=`uploadFileResponse ERROR: ${t}`}if(d.innerHTML="uploadFileResponse await finished.",y&&!y.ok){const t=yield y.text();d.innerHTML=`File Upload Error: ${t}`}d.innerHTML="File uploaded successfully. Waiting for conversion. This may take a few minutes. The video will automatically download when it is complete.";const E=u.data.id;let T=null,v=0;for(;!T&&v<=10;){yield new Promise((t=>setTimeout(t,5e3))),v++;const t=yield fetch(`https://api.cloudconvert.com/v2/jobs/${E}`,{headers:{Authorization:`Bearer ${i}`}}),e=yield t.json();d.innerHTML="Conversion Status ("+v+'): "'+e.data.status+'" Converted File URL:'+T;const n=e.data.tasks.find((t=>"export/url"===t.operation&&"finished"===t.status));T=(null===(s=null===(a=null===(r=null==n?void 0:n.result)||void 0===r?void 0:r.files)||void 0===a?void 0:a[0])||void 0===s?void 0:s.url)||null,v>=10&&(l.style.display="none")}if(T){const t=document.createElement("a");t.href=T,t.download=e+".mp4",document.body.appendChild(t),t.click(),document.body.removeChild(t),d.innerHTML="Downloading "+e,document.getElementById("loading-icon").style.display="none",setTimeout((()=>{l.style.display="none",document.getElementById("return-to-tab-button")}),5e3)}else d.innerHTML="Upload Failed."}catch(t){d.innerHTML="Upload Failed: Error during conversion. ERROR: "+t}}))}(t,e)})),u.start(),h=!0,r.play(),m()}))})),this.initVideoUpload=()=>{const t=document.getElementById("video-icon"),n=document.getElementById("video-editing-tool-container"),i=document.getElementById("video-upload"),r=document.getElementById("video-canvas"),a=r.getContext("2d"),s=document.createElement("video"),l=document.getElementById("video-timeline"),d=document.getElementById("pause-icon"),g=document.getElementById("view-tab-chunks-button");t.src=e;const u=this.getVideoText(o.tab.highEString),c=this.getVideoText(o.tab.bString),h=this.getVideoText(o.tab.gString),m=this.getVideoText(o.tab.dString),p=this.getVideoText(o.tab.aString),S=this.getVideoText(o.tab.eString),b=this.getVideoTime(o.tabChunks.highEString),y=this.getVideoTime(o.tabChunks.bString),E=this.getVideoTime(o.tabChunks.gString),T=this.getVideoTime(o.tabChunks.dString),v=this.getVideoTime(o.tabChunks.aString),f=this.getVideoTime(o.tabChunks.eString);let k=["","","","","",""];function C(t,e,n){const i=s.currentTime;k[n]="",e.forEach(((e,o)=>{i>=e.start&&i<e.end&&(k[n]=t[o])}))}function L(){s.paused||s.ended||(a.clearRect(0,0,r.width,r.height),a.drawImage(s,0,0,r.width,r.height),a.font="48px Monospace",a.fillStyle="white",a.strokeStyle="white",a.lineWidth=2,a.textAlign="left",k.forEach(((t,e)=>{if(t){const n=50,i=r.height-50*(6-e)-100;a.fillText(t,n,i),a.strokeText(t,n,i)}})),requestAnimationFrame(L))}i.addEventListener("change",(t=>{var i;"Tutorial"===this.tabTitle&&this.initSelectClipTutorialFlow();const l=document.getElementById("upload-video-buttons-container"),d=document.getElementById("video-canvas"),u=document.getElementById("video-icon");u.style.display="none",l.style.display="none",d.style.display="block";const c=null===(i=t.target.files)||void 0===i?void 0:i[0];if(c){this.saveVideo(c,this.tabTitle),n.style.display="block";const t=document.getElementById("unmount-video-button");t.style.display="block",g.addEventListener("click",(()=>{"Tutorial"===this.tabTitle&&this.initSelectFirstClipTutorialFlow(),g.style.backgroundColor="#23FE69",setTimeout((()=>{g.style.backgroundColor="rgb(29, 29, 31, .75)"}),500);const t=document.getElementById("popup-modal");t.innerHTML=this.buildTabChunkHTML(),this.addClosePopupListener();const e=document.getElementsByClassName("tab-chunk-text");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(n=>{"Tutorial"===this.tabTitle&&this.initSetStartPointFlow();const i=document.getElementById("selected-tab-indicator");for(let t=0;t<e.length;t++)e[t].classList.remove("tab-segment-selected");i.style.backgroundColor=e[t].getAttribute("color"),i.innerHTML="Clip "+(t+1),this.adjustTabChunkTime(e[t]),e[t].classList.add("tab-segment-selected")}));t.style.display="flex"})),t.addEventListener("click",(()=>{null!=s&&(s.pause(),s.removeAttribute("src"),s.load(),a.clearRect(0,0,r.width,r.height),n.style.display="none",d.style.display="none",l.style.display="flex",u.style.display="block",u.src=e)}));const i=URL.createObjectURL(c);s.src=i,s.load(),s.play(),s.muted=!1,s.addEventListener("loadedmetadata",(()=>{o.videoDuration=Number(s.duration.toFixed(0)),r.width=s.videoWidth,r.height=s.videoHeight,this.TIMER=Math.round(o.tabChunks.highEString.length*o.videoDuration/100),this.addMarkers(),requestAnimationFrame(L)}))}})),n.addEventListener("click",(()=>{s.src&&(s.paused?(requestAnimationFrame(L),s.play(),d.style.display="none"):(s.pause(),d.style.display="flex"))})),l.addEventListener("change",(()=>{L()})),l.addEventListener("input",(()=>{const t=Number(l.value)/100*s.duration;Number.isNaN(t)||(s.currentTime=t,a.clearRect(0,0,r.width,r.height),a.drawImage(s,0,0,r.width,r.height),s.pause(),d.style.display="flex")})),s.addEventListener("timeupdate",(()=>{const t=s.currentTime/s.duration*100;l.value=t.toString(),C(u,b,0),C(c,y,1),C(h,E,2),C(m,T,3),C(p,v,4),C(S,f,5)}))},this.getUserAccount=()=>n(this,void 0,void 0,(function*(){const t=window.location.search,e=new URLSearchParams(t),n=e.get("username"),i=yield fetch("https://guitar-tablature-to-pdf-147ddb720da0.herokuapp.com/getUserAccount?username="+n),r=yield i.json(),a=e.get("title");"Tutorial"===a&&this.initTutorial(),this.tabTitle=a,this.user=r;const s=this.user.tabs.find((t=>t.tabTitle===a));o.tab=this.splitTabIntoChunks(this.formatTabForPDFExport(s.tabData)),o.tabChunks=this.splitTabIntoChunks(this.formatTabForPDFExport(s.tabData)),this.initVideoUpload()})),this.splitTabIntoChunks=t=>{const e=t.highEString.split(""),n=t.bString.split(""),i=t.gString.split(""),o=t.dString.split(""),r=t.aString.split(""),a=t.eString.split(""),s=[],l=[],d=[],g=[],u=[],c=[],h={highEString:[],bString:[],gString:[],dString:[],aString:[],eString:[]};let m=33,p=this.TIMER;for(let t=0;t<e.length;t++)s.push(e[t]),l.push(n[t]),d.push(i[t]),g.push(o[t]),u.push(r[t]),c.push(a[t]),t!==m&&t!==e.length-1||(h.highEString.push({text:s.join(""),id:t,time:{start:p,end:p+this.TIMER}}),h.bString.push({text:l.join(""),id:t,time:{start:p,end:p+this.TIMER}}),h.gString.push({text:d.join(""),id:t,time:{start:p,end:p+this.TIMER}}),h.dString.push({text:g.join(""),id:t,time:{start:p,end:p+this.TIMER}}),h.aString.push({text:u.join(""),id:t,time:{start:p,end:p+this.TIMER}}),h.eString.push({text:c.join(""),id:t,time:{start:p,end:p+this.TIMER}}),m+=33,p+=this.TIMER,s.splice(0,t),l.splice(0,t),d.splice(0,t),g.splice(0,t),u.splice(0,t),c.splice(0,t));return h},this.formatTabForPDFExport=t=>{const e=this.findLongestString(t),n={highEString:[],bString:[],gString:[],dString:[],aString:[],eString:[]};let i,o,r,a,s,l;"string"==typeof t.highEString?(i=t.highEString.split(""),o=t.bString.split(""),r=t.gString.split(""),a=t.dString.split(""),s=t.aString.split(""),l=t.eString.split("")):(i=t.highEString,o=t.bString,r=t.gString,a=t.dString,s=t.aString,l=t.eString);const d=Math.max(i.length,o.length,r.length,a.length,s.length,l.length);for(let e=0;e<d;e++)void 0===t.highEString[e]&&(t.highEString+="-"),void 0===t.bString[e]&&(t.bString+="-"),void 0===t.gString[e]&&(t.gString+="-"),void 0===t.dString[e]&&(t.dString+="-"),void 0===t.aString[e]&&(t.aString+="-"),void 0===t.eString[e]&&(t.eString+="-");for(let i=0;i<e;i++){const e=t.highEString[i],o=t.bString[i],r=t.gString[i],a=t.dString[i],s=t.aString[i],l=t.eString[i],d=t.highEString[i-1],g=t.bString[i-1],u=t.gString[i-1],c=t.dString[i-1],h=t.aString[i-1],m=t.eString[i-1],p=t.highEString[i+1],S=t.bString[i+1],b=t.gString[i+1],y=t.dString[i+1],E=t.aString[i+1],T=t.eString[i+1];"{"!==e&&(n.highEString.push(e),"{"!==d&&"}"!==p&&"}"!==e&&n.highEString.push("-")),"{"!==o&&(n.bString.push(o),"{"!==g&&"}"!==S&&"}"!==o&&n.bString.push("-")),"{"!==r&&(n.gString.push(r),"{"!==u&&"}"!==b&&"}"!==r&&n.gString.push("-")),"{"!==a&&(n.dString.push(a),"{"!==c&&"}"!==y&&"}"!==a&&n.dString.push("-")),"{"!==s&&(n.aString.push(s),"{"!==h&&"}"!==E&&"}"!==s&&n.aString.push("-")),"{"!==l&&(n.eString.push(l),"{"!==m&&"}"!==T&&"}"!==l&&n.eString.push("-"))}const g=n.highEString.join("").split(""),u=n.bString.join("").split(""),c=n.gString.join("").split(""),h=n.dString.join("").split(""),m=n.aString.join("").split(""),p=n.eString.join("").split(""),S=Math.max(g.length,u.length,c.length,h.length,m.length,p.length);let b={highEString:[],bString:[],gString:[],dString:[],aString:[],eString:[]};for(let t=0;t<S;t++)b.highEString.push(n.highEString[t]||"-"),b.bString.push(n.bString[t]||"-"),b.gString.push(n.gString[t]||"-"),b.dString.push(n.dString[t]||"-"),b.aString.push(n.aString[t]||"-"),b.eString.push(n.eString[t]||"-");b={highEString:b.highEString,bString:b.bString,gString:b.gString,dString:b.dString,aString:b.aString,eString:b.eString};let y=0;for(let t=0;t<b.highEString.length;t++){const e=b.highEString[t]||"-",n=b.bString[t]||"-",i=b.gString[t]||"-",o=b.dString[t]||"-",r=b.aString[t]||"-",a=b.eString[t]||"-";"-"===e&&"-"===n&&"-"===i&&"-"===o&&"-"===r&&"-"===a||(y=t),"}"===e&&(b.highEString[t]="-"),"}"===n&&(b.bString[t]="-"),"}"===i&&(b.gString[t]="-"),"}"===o&&(b.dString[t]="-"),"}"===r&&(b.aString[t]="-"),"}"===a&&(b.eString[t]="-"),"}"!==e&&"}"!==n&&"}"!==i&&"}"!==o&&"}"!==r&&"}"!==a||("}"===e?b.highEString[t]="-":b.highEString.splice(t,0,"-"),"}"===n?b.bString[t]="-":b.bString.splice(t,0,"-"),"}"===i?b.gString[t]="-":b.gString.splice(t,0,"-"),"}"===o?b.dString[t]="-":b.dString.splice(t,0,"-"),"}"===r?b.aString[t]="-":b.aString.splice(t,0,"-"),"}"===a?b.eString[t]="-":b.eString.splice(t,0,"-"))}const E={highEString:b.highEString.slice(0,y+4).join(""),bString:b.bString.slice(0,y+4).join(""),gString:b.gString.slice(0,y+4).join(""),dString:b.dString.slice(0,y+4).join(""),aString:b.aString.slice(0,y+4).join(""),eString:b.eString.slice(0,y+4).join("")},T=document.getElementById("tab-text-highEString"),v=document.getElementById("tab-text-bString"),f=document.getElementById("tab-text-gString"),k=document.getElementById("tab-text-dString"),C=document.getElementById("tab-text-aString"),L=document.getElementById("tab-text-eString");return T.innerHTML=b.highEString.slice(0,Math.min(b.highEString.length,b.bString.length,b.gString.length,b.dString.length,b.aString.length,b.eString.length)).join(""),v.innerHTML=b.bString.slice(0,Math.min(b.highEString.length,b.bString.length,b.gString.length,b.dString.length,b.aString.length,b.eString.length)).join(""),f.innerHTML=b.gString.slice(0,Math.min(b.highEString.length,b.bString.length,b.gString.length,b.dString.length,b.aString.length,b.eString.length)).join(""),k.innerHTML=b.dString.slice(0,Math.min(b.highEString.length,b.bString.length,b.gString.length,b.dString.length,b.aString.length,b.eString.length)).join(""),C.innerHTML=b.aString.slice(0,Math.min(b.highEString.length,b.bString.length,b.gString.length,b.dString.length,b.aString.length,b.eString.length)).join(""),L.innerHTML=b.eString.slice(0,Math.min(b.highEString.length,b.bString.length,b.gString.length,b.dString.length,b.aString.length,b.eString.length)).join(""),E},this.findLongestString=t=>{const e={stringName:"",stringLength:0};return Object.entries(t).forEach((t=>{const n=t[0],i=t[1].length;i>e.stringLength&&(e.stringName=n,e.stringLength=i)})),e.stringLength},this.user={},this.tabTitle="",this.tabClipSegmentColors=["#23FE69","#FF1493","#00FFFF","#9400D3","#FDFD00","#FF073A","#FDFD00"]}detectBrowser(){const t=navigator.userAgent;return/iP(hone|od|ad).*Safari/i.test(t)?"Safari Mobile":/Firefox/i.test(t)?"Firefox":"Other"}resetTimeline(){const t=document.getElementById("video-timeline");t&&(t.value="0",t.dispatchEvent(new Event("input")))}}(new o).init()})();