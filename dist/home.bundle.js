(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var i=e.g.document;if(!t&&i&&(i.currentScript&&"SCRIPT"===i.currentScript.tagName.toUpperCase()&&(t=i.currentScript.src),!t)){var n=i.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=n[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=e.p+"51fd5ad6fab5f0a26bfa.svg";var i=function(e,t,i,n){return new(i||(i=Promise))((function(o,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function r(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,r)}l((n=n.apply(e,t||[])).next())}))};const n="https://guitar-tablature-to-pdf-147ddb720da0.herokuapp.com/";(new class{constructor(){this.init=()=>{const e=document.querySelector("body");e&&(e.style.background="url("+t+")",e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center",e.style.height="100vh",this.getUserAccount(),this.createNewTab(),this.reloadPage())},this.openPopUpModal=e=>{const t=document.getElementById("popup-modal"),i=document.getElementById("popup-modal-overlay");t.innerHTML=e,document.getElementById("cancel-button").addEventListener("click",(()=>{this.closePopupModal()})),t.style.display="flex",i.style.display="flex"},this.addDeleteButtonListeners=()=>{const e=document.getElementsByClassName("delete-icon");for(let t=0;t<e.length;t++){const i=e[t];i.addEventListener("click",(e=>{this.deleteTab(i)}))}},this.checkForEmptyTabs=()=>{this.user&&this.user.tabs&&0===this.user.tabs.length&&document.getElementById("create-tab-button").classList.add("notify")},this.displayTabsList=()=>{const e=document.getElementById("tab-list-container");if(document.getElementById("loading-icon").style.display="none",!this.tabs||this.tabs.length<1){const t=document.createElement("li");t.id="tab-title-Tutorial",t.className="list-item",t.innerHTML+='<p><a href="/create.html?username=Guest&title=Tutorial">Tutorial</a></p><i id="Tutorial-icon" style="position: absolute; height: 1rem; width: 1rem; right: 1rem;" class="delete-icon fas fa-trash-can"></i>',e.append(t)}else this.tabs.forEach((t=>{const i=document.createElement("li");if(i.id="tab-title-"+t.tabTitle,i.className="list-item",t.videoS3URL&&t.videoS3URL.length>=1)if(window.localStorage.getItem(t.videoS3URL))i.innerHTML='<a download href="'+t.videoS3URL[0]+'"><i id="icon-'+t.videoS3URL[0]+'" style="position: absolute; height: 1rem; width: 1rem; left: 1rem; top: calc(50% - .5rem);" class="fas fa-video"></i></a>';else{const e=document.createElement("label"),n=document.createElement("button");e.style.color="white",e.innerHTML='<h3>Your "'+t.tabTitle+'" video is ready!</h3> <p>Click the flashing video icon to download it.</p>',n.innerHTML="Cool!",n.id="cancel-button",this.openPopUpModal(e.outerHTML+n.outerHTML),window.localStorage.setItem(t.videoS3URL,"true"),i.innerHTML='<a download href="'+t.videoS3URL[0]+'"><i id="icon-'+t.videoS3URL[0]+'" style="position: absolute; height: 1rem; width: 1rem; left: 1rem; top: calc(50% - .5rem);" class="fas fa-video notify-icon"></i></a>'}else i.innerHTML='<i style="position: absolute; height: 1rem; width: 1rem; left: 1rem;" class="fa-solid fa-guitar"></i>';i.innerHTML+="<p>"+t.tabTitle+'</p><i id="'+t.tabTitle+'-icon" style="position: absolute; height: 1rem; width: 1rem; right: 1rem;" class="delete-icon fas fa-trash-can"></i>',i.children[1].onclick=()=>{this.openCreatePage(t.tabTitle)},e.append(i)}))},this.addRemoveS3URLListenersToIcons=()=>{const e=document.getElementsByClassName("fa-video");for(let t=0;t<e.length;t++){const i=e[t],n=i.id.split("icon-")[1];i.addEventListener("click",(()=>{this.deleteS3LinkOnVideoDownload(this.user.username,n)}))}},this.deleteS3LinkOnVideoDownload=(e,t)=>{try{fetch(n+"deleteS3Link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,videoS3URL:t})}).then((e=>e.json())).catch((e=>{}))}catch(e){}},this.checkIfTabExists=e=>{let t=!1;return this.user&&this.user.tabs&&this.user.tabs.length>1&&this.user.tabs.forEach((i=>{i.tabTitle===e&&(t=!0)})),t},this.addNewTabToDb=()=>{document.getElementById("create-button").addEventListener("click",(()=>{const e=document.getElementById("create-new-tab-input").value;if("Guest"===this.user.username)window.location.href="create.html?username=Guest&title=My Tab";else if(e.length>1){if(this.checkIfTabExists(e))return void(document.getElementById("create-error-label").style.display="flex");fetch(n+"saveTab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.user.username,tabData:{highEString:"-----",bString:"-----",gString:"-----",dString:"-----",aString:"-----",eString:"-----"},tabTitle:e})}),window.location.href="create.html?username="+this.user.username+"&title="+e}}))},this.reloadPage=()=>{document.getElementById("reload-icon").addEventListener("click",(()=>{window.location.reload()}))},this.closePopupModal=()=>{const e=document.getElementById("popup-modal"),t=document.getElementById("popup-modal-overlay");e.innerHTML="",e.style.display="none",t.style.display="none"},this.createNewTab=()=>{document.getElementById("create-tab-button").addEventListener("click",(()=>{const e=document.createElement("h4"),t=document.createElement("label"),i=document.createElement("input"),n=document.createElement("button"),o=document.createElement("button");o.innerHTML="Cancel",o.id="cancel-button",t.innerHTML="This Title is already taken.",o.innerHTML="Cancel",t.id="create-error-label",n.innerHTML="Create",n.id="create-button",e.innerHTML="What would you like to name your tab?",e.id="create-label",i.id="create-new-tab-input",i.placeholder="Title",this.openPopUpModal(e.outerHTML+i.outerHTML+t.outerHTML+n.outerHTML+o.outerHTML),this.addNewTabToDb()}))},this.openCreatePage=e=>{window.location.href="/create.html?username="+this.user.username+"&title="+e},this.highlightTutorial=()=>{const e=document.getElementById("tab-title-Tutorial");e&&"true"!==window.localStorage.getItem("Tutorial")&&(setTimeout((()=>{e.style.backgroundColor="#C8B273;",setTimeout((()=>{e.style.backgroundColor="rgba(43, 43, 43, 0.2)"}),2e3)}),1500),window.localStorage.setItem("Tutorial","true"))},this.getUserAccount=()=>i(this,void 0,void 0,(function*(){const e=window.location.search,t=new URLSearchParams(e).get("username"),i=yield fetch(n+"getUserAccount?username="+t),o=yield i.json();document.getElementById("username-label").innerHTML=o.username&&o.username.length>=1&&!o.username.includes("Guest")?o.username:"Guest",this.user=o,this.tabs=o.tabs,this.displayTabsList(),this.highlightTutorial(),this.addDeleteButtonListeners(),this.checkForEmptyTabs(),this.addRemoveS3URLListenersToIcons()})),this.deleteTab=e=>i(this,void 0,void 0,(function*(){const t=e.id.split("-")[0];(yield fetch(n+"deleteTab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.user.username,title:t})}))&&(document.getElementById("tab-title-"+t).style.display="none")})),this.user={username:"Guest",tabs:[{tabTitle:"Tutorial"}]},this.tabs=[]}}).init()})();