(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var i=e.g.document;if(!t&&i&&(i.currentScript&&"SCRIPT"===i.currentScript.tagName.toUpperCase()&&(t=i.currentScript.src),!t)){var n=i.getElementsByTagName("script");if(n.length)for(var a=n.length-1;a>-1&&(!t||!/^http(s?):/.test(t));)t=n[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=e.p+"51fd5ad6fab5f0a26bfa.svg";var i=function(e,t,i,n){return new(i||(i=Promise))((function(a,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,s)}l((n=n.apply(e,t||[])).next())}))};const n="https://guitar-tablature-to-pdf-147ddb720da0.herokuapp.com/";(new class{constructor(){this.init=()=>{const e=document.querySelector("body");e&&(e.style.background="url("+t+")",e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center",e.style.height="100vh",this.getUserAccount(),this.createNewTab())},this.openPopUpModal=e=>{const t=document.getElementById("popup-modal"),i=document.getElementById("popup-modal-overlay");t.innerHTML=e,t.style.display="flex",i.style.display="flex"},this.addDeleteButtonListeners=()=>{const e=document.getElementsByClassName("delete-icon");for(let t=0;t<e.length;t++){const i=e[t];i.addEventListener("click",(e=>{this.deleteTab(i)}))}},this.checkForEmptyTabs=()=>{0===this.user.tabs.length&&document.getElementById("create-tab-button").classList.add("notify")},this.displayTabsList=()=>{const e=document.getElementById("tab-list-container");document.getElementById("loading-icon").style.display="none",this.tabs.forEach((t=>{const i=document.createElement("li");i.id="tab-title-"+t.tabTitle,i.className="list-item",t.videoS3URL?window.localStorage.getItem(t.videoS3URL)?i.innerHTML='<a download href="'+t.videoS3URL[0]+'"><i style="position: absolute; height: 1rem; width: 1rem; left: 1rem; top: calc(50% - .5rem);" class="fas fa-video"></i></a>':(window.localStorage.setItem(t.videoS3URL,"true"),i.innerHTML='<a download href="'+t.videoS3URL[0]+'"><i style="position: absolute; height: 1rem; width: 1rem; left: 1rem; top: calc(50% - .5rem);" class="fas fa-video notify-icon"></i></a>'):i.innerHTML='<i style="position: absolute; height: 1rem; width: 1rem; left: 1rem;" class="fa-solid fa-guitar"></i>',i.innerHTML+="<p>"+t.tabTitle+'</p><i id="'+t.tabTitle+'-icon" style="position: absolute; height: 1rem; width: 1rem; right: 1rem;" class="delete-icon fas fa-trash-can"></i>',i.children[1].onclick=()=>{this.openCreatePage(t.tabTitle)},e.append(i)}))},this.checkIfTabExists=e=>{let t=!1;return this.user.tabs.length>1&&this.user.tabs.forEach((i=>{i.tabTitle===e&&(t=!0)})),t},this.addNewTabToDb=()=>{document.getElementById("create-button").addEventListener("click",(()=>{const e=document.getElementById("create-new-tab-input").value;if(e.length>1){if(this.checkIfTabExists(e))return void(document.getElementById("create-error-label").style.display="flex");fetch(n+"saveTab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.user.username,tabData:{highEString:"-----",bString:"-----",gString:"-----",dString:"-----",aString:"-----",eString:"-----"},title:e})}),window.location.href="create.html?username="+this.user.username+"&title="+e}}))},this.createNewTab=()=>{document.getElementById("create-tab-button").addEventListener("click",(()=>{const e=document.createElement("h4"),t=document.createElement("label"),i=document.createElement("input"),n=document.createElement("button"),a=document.createElement("button");t.innerHTML="This Title is already taken.",a.innerHTML="Cancel",t.id="create-error-label",n.innerHTML="Create",n.id="create-button",e.innerHTML="What would you like to name your tab?",e.id="create-label",i.id="create-new-tab-input",i.placeholder="Title",this.openPopUpModal(e.outerHTML+i.outerHTML+t.outerHTML+n.outerHTML),this.addNewTabToDb(),a.addEventListener("click",(()=>{}))}))},this.openCreatePage=e=>{window.location.href="/create.html?username="+this.user.username+"&title="+e},this.highlightTutorial=()=>{const e=document.getElementById("tab-title-Tutorial");e&&"true"!==window.localStorage.getItem("Tutorial")&&(setTimeout((()=>{e.style.backgroundColor="#23FE69",setTimeout((()=>{e.style.backgroundColor="rgba(43, 43, 43, 0.2)"}),2e3)}),1500),window.localStorage.setItem("Tutorial","true"))},this.getUserAccount=()=>i(this,void 0,void 0,(function*(){const e=window.location.search,t=new URLSearchParams(e).get("username"),i=yield fetch(n+"getUserAccount?username="+t),a=yield i.json();document.getElementById("username-label").innerHTML=a.username+"'s Tabs",this.user=a,this.tabs=a.tabs,this.displayTabsList(),this.highlightTutorial(),this.addDeleteButtonListeners(),this.checkForEmptyTabs()})),this.deleteTab=e=>i(this,void 0,void 0,(function*(){const t=e.id.split("-")[0];(yield fetch(n+"deleteTab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.user.username,title:t})}))&&(document.getElementById("tab-title-"+t).style.display="none")})),this.user={username:"",tabs:[]},this.tabs=[]}}).init()})();