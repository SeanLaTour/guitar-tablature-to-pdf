(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(t=n.currentScript.src),!t)){var i=n.getElementsByTagName("script");if(i.length)for(var o=i.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=i[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=e.p+"51fd5ad6fab5f0a26bfa.svg";var n=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const i="https://guitar-tablature-to-pdf-147ddb720da0.herokuapp.com/";(new class{constructor(){this.init=()=>{const e=document.querySelector("body");e&&(e.style.background="url("+t+")",e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center",e.style.height="100vh",this.getUserAccount(),this.createNewTab(),this.reloadPage())},this.openPopUpModal=e=>{const t=document.getElementById("popup-modal"),n=document.getElementById("popup-modal-overlay");t.innerHTML=e,document.getElementById("cancel-button").addEventListener("click",(()=>{this.closePopupModal()})),t.style.display="flex",n.style.display="flex"},this.addDeleteButtonListeners=()=>{const e=document.getElementsByClassName("delete-icon");for(let t=0;t<e.length;t++){const n=e[t];n.addEventListener("click",(e=>{this.deleteTab(n)}))}},this.checkForEmptyTabs=()=>{0===this.user.tabs.length&&document.getElementById("create-tab-button").classList.add("notify")},this.displayTabsList=()=>{const e=document.getElementById("tab-list-container");document.getElementById("loading-icon").style.display="none",this.tabs.forEach((t=>{const n=document.createElement("li");if(n.id="tab-title-"+t.tabTitle,n.className="list-item",t.videoS3URL&&t.videoS3URL.length>=1){const e=window.localStorage.getItem(t.videoS3URL);if(this.addRemoveS3URLListenersToIcons(),e)n.innerHTML='<a download href="'+t.videoS3URL[0]+'"><i id="icon-'+t.videoS3URL[0]+'" style="position: absolute; height: 1rem; width: 1rem; left: 1rem; top: calc(50% - .5rem);" class="fas fa-video"></i></a>';else{const e=document.createElement("label"),i=document.createElement("button");e.style.color="white",e.innerHTML='<h3>Your "'+t.tabTitle+'" video is ready!</h3> <p>Click the flashing video icon to download it.</p>',i.innerHTML="Cool!",i.id="cancel-button",this.openPopUpModal(e.outerHTML+i.outerHTML),window.localStorage.setItem(t.videoS3URL,"true"),n.innerHTML='<a download href="'+t.videoS3URL[0]+'"><i id="icon-'+t.videoS3URL[0]+'" style="position: absolute; height: 1rem; width: 1rem; left: 1rem; top: calc(50% - .5rem);" class="fas fa-video notify-icon"></i></a>'}}else n.innerHTML='<i style="position: absolute; height: 1rem; width: 1rem; left: 1rem;" class="fa-solid fa-guitar"></i>';n.innerHTML+="<p>"+t.tabTitle+'</p><i id="'+t.tabTitle+'-icon" style="position: absolute; height: 1rem; width: 1rem; right: 1rem;" class="delete-icon fas fa-trash-can"></i>',n.children[1].onclick=()=>{this.openCreatePage(t.tabTitle)},e.append(n)}))},this.addRemoveS3URLListenersToIcons=()=>{const e=document.getElementsByClassName("fa-video");for(let t=0;t<e.length;t++){const n=e[t],i=n.id.split("icon-")[1];n.addEventListener("click",(()=>{this.deleteS3LinkOnVideoDownload(this.user.username,i)}))}},this.deleteS3LinkOnVideoDownload=(e,t)=>{fetch(i+"deleteS3Link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,videoS3URL:t})}).then((e=>e.json()))},this.checkIfTabExists=e=>{let t=!1;return this.user.tabs.length>1&&this.user.tabs.forEach((n=>{n.tabTitle===e&&(t=!0)})),t},this.addNewTabToDb=()=>{document.getElementById("create-button").addEventListener("click",(()=>{const e=document.getElementById("create-new-tab-input").value;if(e.length>1){if(this.checkIfTabExists(e))return void(document.getElementById("create-error-label").style.display="flex");fetch(i+"saveTab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.user.username,tabData:{highEString:"-----",bString:"-----",gString:"-----",dString:"-----",aString:"-----",eString:"-----"},tabTitle:e})}),window.location.href="create.html?username="+this.user.username+"&title="+e}}))},this.reloadPage=()=>{document.getElementById("reload-icon").addEventListener("click",(()=>{window.location.reload()}))},this.closePopupModal=()=>{const e=document.getElementById("popup-modal"),t=document.getElementById("popup-modal-overlay");e.innerHTML="",e.style.display="none",t.style.display="none"},this.createNewTab=()=>{document.getElementById("create-tab-button").addEventListener("click",(()=>{const e=document.createElement("h4"),t=document.createElement("label"),n=document.createElement("input"),i=document.createElement("button"),o=document.createElement("button");o.innerHTML="Cancel",o.id="cancel-button",t.innerHTML="This Title is already taken.",o.innerHTML="Cancel",t.id="create-error-label",i.innerHTML="Create",i.id="create-button",e.innerHTML="What would you like to name your tab?",e.id="create-label",n.id="create-new-tab-input",n.placeholder="Title",this.openPopUpModal(e.outerHTML+n.outerHTML+t.outerHTML+i.outerHTML+o.outerHTML),this.addNewTabToDb()}))},this.openCreatePage=e=>{window.location.href="/create.html?username="+this.user.username+"&title="+e},this.highlightTutorial=()=>{const e=document.getElementById("tab-title-Tutorial");e&&"true"!==window.localStorage.getItem("Tutorial")&&(setTimeout((()=>{e.style.backgroundColor="#C8B273;",setTimeout((()=>{e.style.backgroundColor="rgba(43, 43, 43, 0.2)"}),2e3)}),1500),window.localStorage.setItem("Tutorial","true"))},this.getUserAccount=()=>n(this,void 0,void 0,(function*(){const e=window.location.search,t=new URLSearchParams(e).get("username"),n=yield fetch(i+"getUserAccount?username="+t),o=yield n.json();document.getElementById("username-label").innerHTML=o.username.length>=1?o.username:"Test User",this.user=o,this.tabs=o.tabs,this.displayTabsList(),this.highlightTutorial(),this.addDeleteButtonListeners(),this.checkForEmptyTabs()})),this.deleteTab=e=>n(this,void 0,void 0,(function*(){const t=e.id.split("-")[0];(yield fetch(i+"deleteTab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.user.username,title:t})}))&&(document.getElementById("tab-title-"+t).style.display="none")})),this.user={username:"",tabs:[]},this.tabs=[]}}).init()})();